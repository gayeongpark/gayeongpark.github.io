---
layout: post
title: TCM - practice for Kioptrix Lab
subtitle: Preparing for PJPT (Practical Junior Penetration Tester) certification by walking through Kioptrix lab (level1)
tags: [ethical hacking, tcm, pjpt, kiotrix, utm, level1]
comments: true
author: Lantana Park
---

# Kioptrix Lab

## Preparation

As the UTM user, it was really hard to install kioptrix lab in my utm machine. Thankfully, TCM provided `.7z` converted file for the UTM users. I could just follow the given instruction from TCM discord.

1. Downloaded `Kioptrix_utm.7z`

   ![download](../assets/img/kioptrix/Screenshot%202024-06-26%20at%2023.25.03.png)

2. Extracted the contents of this compressed file. `7zz x Kioptrix_utm.7z`

   ![decompressed1](../assets/img/kioptrix/Screenshot%202024-06-26%20at%2023.16.56.png)

   ![decompressed2](../assets/img/kioptrix/Screenshot%202024-06-26%20at%2023.17.12.png)

3. Installed the decompressed file on my UTM machine

   ![install](../assets/img/kioptrix/Screenshot%202024-06-26%20at%2023.29.38.png)

4. Run this machine and then test the network connection using `ping 8.8.8.8` (google dns ip address)

   ![test](../assets/img/kioptrix/Screenshot%202024-06-26%20at%2022.52.38.png)

5. While running up on the Kioptrix lab, I found the lab's ip address on my kali machine and then ready to attack with port scanning.

   discovering lab's networking status

   `netdiscover -r 192.168.64.0/24`

   ![labnetworking](../assets/img/kioptrix/Screenshot%202024-06-26%20at%2022.52.55.png)

   Scanning my lab machine from Kali

   `nmap -T4 -p- -A 192.168.64.15`

   ![scanning1](../assets/img/kioptrix/Screenshot%202024-06-26%20at%2022.53.07.png)

   ![scanning2](../assets/img/kioptrix/Screenshot%202024-06-26%20at%2022.53.18.png)

## Scanning/Enumeration

### trivial tip from class!

What makes me set apart from other people is my ability to information gathering and to enumerate the target. In my opinion, in order to collect the juicy information, it is required for me to learn more about the natures of each protocol and its vulnerabilities.

1. First, I visited the opened websites under `http`/`https` based on the result of the `nmap` scan.

   ![website1](../assets/img/kioptrix/Screenshot%202024-06-27%20at%2015.27.48.png)

   ![website2](../assets/img/kioptrix/Screenshot%202024-06-27%20at%2015.27.59.png)

   ![website3](../assets/img/kioptrix/Screenshot%202024-06-28%20at%2009.24.38.png)

Noted information
`80(http)/443(https) - 192.168.64.15`
`Default webpage - Apache Web Server/1.3.20 (Unix) - PHP`
`Document - https://192.168.64.15/manual/index.html Not Found`

2. Since I noticed there are websites running under `http` and `https`. I scanned the vulnerability of these services. I could not scan the `https` service, but scanned potential vulnerabilities `http` service.

   `nikto -h http://192.168.64.15`

   `nikto` is to examine a web server to find potential problems and security vulnerabilities.

   `-h` option is to specify the host `http://192.168.64.15`.

   ![vulnerability](../assets/img/kioptrix/Screenshot%202024-06-27%20at%2015.42.24.png)

   ![vulnerability2](../assets/img/kioptrix/Screenshot%202024-06-27%20at%2015.42.46.png)

Noted information
`mod_ssl/2.8.4 - mod_ssl 2.8.7 and lower are vulnerable to a remote buffer overflow which may allow a remote shell.`
Because it seems to be a low hanging fruit for entering to the shell from remote.

### What is mod_ssl?

It is an Apache HTTP Server module that provided support for SSL and TLS encryption for secure communication over HTTP and HTTPS. Since 2.8.7 is really older version of `mod_ssl`, I found common vulnerabilities by googling this web server version.

Popular vulnerability
**Heartbleed (CVE-2014-0160)** - allows to read the memory of the systems by sending a crafted packet to the server.

3. I scanned hidden directories of this service with using `dirbuster`.

   ![dirbcommand](../assets/img/kioptrix/Screenshot%202024-06-28%20at%2011.54.34.png)

   ![dirbcommand2](../assets/img/kioptrix/Screenshot%202024-06-28%20at%2011.54.44.png)

   ![dirb1](../assets/img/kioptrix/Screenshot%202024-06-28%20at%2011.12.35.png)

   ![dirb2](../assets/img/kioptrix/Screenshot%202024-06-28%20at%2011.13.04.png)

   And visited some found directories

   ![visited2](../assets/img/kioptrix/Screenshot%202024-06-28%20at%2011.13.26.png)

   ![visited1](../assets/img/kioptrix/Screenshot%202024-06-28%20at%2011.46.39.png)

   ![visited3](../assets/img/kioptrix/Screenshot%202024-06-28%20at%2011.43.29.png)

   ![chart1](../assets/img/kioptrix/Screenshot%202024-06-28%20at%2012.12.56.png)

   ![chart2](../assets/img/kioptrix/Screenshot%202024-06-28%20at%2011.41.47.png)

   ![chart3](../assets/img/kioptrix/Screenshot%202024-06-28%20at%2011.42.05.png)

   Noted information
   `192.168.64.15/usage/usage_202406.html - Generated by Webalizer Version 2.01`

   ### what is webalizer?

   It is **a web log analysis software tool**. It has multiple cross-site scripting vulnerabilities that could allow malicious HTML tags to be injected in the reports.
